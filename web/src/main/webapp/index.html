<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Red Hat Catapult</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script language="JavaScript">
    $(document).ready(function() {
      var appstoreURL = "https://raw.githubusercontent.com/redhat-kontinuity/appstore/master/appstore.json";
      console.log("Obtaining app store metadata from: " + appstoreURL);
      $.getJSON(appstoreURL)
        .done(function(json){
          console.log("Got appstore data: "+ json);
          $.each(json.repositories, function(i,repository){
            var repositoryName = repository.name;
            $("#flingSourceRepo").append(
              $("<option>").attr("value", repositoryName).text(repositoryName)
            );
            console.log("Added: "+ repository.name);
          })
        })
        .fail(function(jqxhr, textStatus, error){
          console.log("Could not fetch AppStore metadata: " + textStatus);
        });
    });
    </script>
</head>
<body>
<h1>Catapult</h1>
<form id="flingForm" action="api/catapult/fling" method="get">
    <select required="true" id="flingSourceRepo" name="source_repo" form="flingForm">
        <option value="">Select an option below</option>
    </select>
    <input id="flingSubmitButton" type="submit">
</form>

</body>
</html>
